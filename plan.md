# Plan

## 1. gen model code for tabled

- [ ] status

```go
package model

type User struct {
	No     string `db:"no" udt:"xxx" json:"no"`           // comment1
	DingID string `db:"ding_id" udt:"xxx" json:"ding_id"` // comment2
}

```

## 2. gen cols code for table

dependence on model

- [ ] status

```go
// Code generated by pgx-z. DO NOT EDIT.
// Code generated by pgx-z. DO NOT EDIT.
// Code generated by pgx-z. DO NOT EDIT.
// Code generated at 2023-08-19 12:27:47.5257156 +0800 CST m=+0.173176701

package col

import (
	"cirs-gws-go/svc/gws_api/internal/repo/model"
	"github.com/michaelzx/pgx-z/pgxz"
)

type ding_dept pgxz.Col

func DingDept(m *model.DingDept) *ding_dept {
	c := new(ding_dept)
	c.Init()
	if m != nil {
		c.SetIfNotNil("id", m.Id)
		c.SetIfNotNil("pid", m.Pid)
		c.SetIfNotNil("title", m.Title)
	}
	return c
}

const tableNameDingDept = "ding_dept"

// TableName DingDept's table name
func (ding_dept) TableName() string {
	return tableNameDingDept
}

func (r *ding_dept) Keys() []string {
	return []string{
		"id", "pid", "title",
	}
}
func (r *ding_dept) Id(v int64) *ding_dept {
	r.Set("id", v)
	return r
}
func (r *ding_dept) Pid(v int64) *ding_dept {
	r.Set("pid", v)
	return r
}
func (r *ding_dept) Title(v string) *ding_dept {
	r.Set("title", v)
	return r
}


```

## 3. usage

todo

```go
package repo

func UpdateByDingId(dingId string, user *model.User) error {
	updateColumns := cols.User(nil).
		RealName("xxxx").
		Email(zutil.P("xxx"))
	err := pg.Update[model.User](r.db).Set(updateColumns).Where("id=?", dingId).Commit()
	return err
}
```